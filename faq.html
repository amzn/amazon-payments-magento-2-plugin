<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Frequently Asked Questions (FAQ) &mdash; Amazon Pay for Magento 2 documentation</title>
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="top" title="Amazon Pay for Magento 2 documentation" href="index.html" />
  <link rel="next" title="Migration: Magento 1 to Magento 2" href="m1_m2_migration.html" />
  <link rel="prev" title="Troubleshooting" href="troubleshooting.html" />
  <script src="_static/js/modernizr.min.js"></script>
</head>

<body class="wy-body-for-nav" role="document">
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          <a href="index.html" class="icon icon-home"> Amazon Pay for Magento 2
          </a>
        </div>
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          <ul class="current">
            <li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
            <li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
            <li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
            <li class="toctree-l1"><a class="reference internal" href="signin.html">Amazon Sign-in</a></li>
            <li class="toctree-l1"><a class="reference internal" href="flow.html">Order &amp; payment workflow</a></li>
            <li class="toctree-l1"><a class="reference internal" href="customisation.html">Frontend Customisation</a>
            </li>
            <li class="toctree-l1"><a class="reference internal" href="testing.html">Testing your integration</a></li>
            <li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
            <li class="toctree-l1 current"><a class="current reference internal" href="#">Frequently Asked Questions
                (FAQ)</a>
              <ul>
                <!-- <li class="toctree-l2"><a class="reference internal" href="#i-am-using-a-custom-theme-what-do-i-have-to-do">I am using a custom theme, what do I have to do?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#amazon-pay-widgets-are-not-surfaced">Amazon Pay Widgets are not surfaced</a></li> -->
                <li class="toctree-l2"><a class="reference internal" href="#display-issues">The Amazon Pay buttons are not displaying correctly</a></li>
                <li class="toctree-l2"><a class="reference internal" href="#checkout-redirect">The Amazon Pay button is not redirecting to my checkout page</a></li>
                <li class="toctree-l2"><a class="reference internal" href="#orders-not-created-in-magento">Why are there some transactions in Seller Central with no associated order in Magento?</a></li>
                <li class="toctree-l2"><a class="reference internal" href="#orders-canceled-in-magento">Why do we consistently see some canceled Magento orders paid with Amazon Pay?</a></li>
                <li class="toctree-l2"><a class="reference internal" href="#transaction-ids-changed">Amazon Pay transaction IDs used to contain an 'A'; why do they now show a 'C'?</a></li>
                <li class="toctree-l2"><a class="reference internal" href="#cookies">Does the Amazon Pay module create any cookies?</a></li>
              </ul>
            </li>
            <li class="toctree-l1"><a class="reference internal" href="m1_m2_migration.html">Migration: Magento 1 to
                Magento 2</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Amazon Pay for Magento 2</a>
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
            <ul class="wy-breadcrumbs">
              <li><a href="index.html">Docs</a> &raquo;</li>
              <li>Frequently Asked Questions (FAQ)</li>
              <li class="wy-breadcrumbs-aside">
              </li>
            </ul>
            <hr />
          </div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div itemprop="articleBody">
              <div class="section" id="frequently-asked-questions-faq">
                <h1>Frequently Asked Questions (FAQ)<a class="headerlink" href="#frequently-asked-questions-faq"
                    title="Permalink to this headline">¶</a></h1>
                    <div class="admonition note">
                      <p class="first admonition-title">Note</p>
                      <p class="last">In order to provide the smoothest merchant/buyer experience possible, always ensure that you are running the latest 
                        version of the Amazon Pay for Magento 2 Module.</p>
                    </div>
                    <div class="section" id="display-issues">
                      <h2>The Amazon Pay buttons are not displaying correctly<a class="headerlink" 
                        href="#display-issues" title="Permalink to this headline">¶</a></h2>
                        <p>If you are experiencing problems with button rendering, check your credentials first in the module configuration. 
                          Ensure that you are entering settings in the correct site/store scope, and that values aren't being accidentally 
                          inherited by checking the 'Use default' or 'Use website' checkboxes for a configuration field. Some invalid credential 
                          values won't allow the module configuration to be saved, but it is possible to save the merchant ID incorrectly or 
                          select the wrong environment value (Sandbox or Live). In this case, the button may be grayed out or disabled, not 
                          render at all, or redirect to Amazon with an error message:
                        </p>
                        <img alt="_images/invalid-request.png" src="_images/invalid-request.png" />
                        <p>If your configuration values are correct and the button is still not rendering properly, there may be a conflict 
                          with a custom theme being used in the store. If the theme doesn't extend from the standard Magento Luma or blank 
                          theme, it's possible some layout elements have been moved/removed that the module relies on to load javascript or 
                          display the button.
                        </p>
                    </div>
                    <div class="section" id="checkout-redirect">
                      <h2>The Amazon Pay button is not redirecting to my checkout page<a class="headerlink" 
                        href="#checkout-redirect" title="Permalink to this headline">¶</a></h2>
                        <p>This may happen if your store uses a one-step checkout extension. Some OSC modules define custom paths for their 
                          checkout page, and Amazon Pay needs to know where the checkout page is located in order to pass along checkout 
                          session information. You can set the value for <em>Magento Checkout URL Path</em> in the module configuration 
                          under <em>Advanced > Developer Options</em> to be the URL of your checkout page. If your store isn't using an OSC 
                          module and you need to reset redirect values to default, you can find them below:
                        </p>
                        <img alt="_images/default-redirect-values.png" src="_images/default-redirect-values.png" />
                    </div>
                  <div class="section" id="orders-not-created-in-magento">
                    <h2>Why are there some transactions in Seller Central with no associated order in Magento?<a class="headerlink" 
                      href="#orders-not-created-in-magento" title="Permalink to this headline">¶</a></h2>
                      <div class="admonition caution">
                        <p class="first admonition-title">Info</p>
                        <p class="last">This only applies to versions of the module &lt; 5.17.0.</p>
                      </div>
                      <p>There are distinct processes happening between Magento and Amazon Pay when a customer places an order. Occasionally, 
                        something exceptional may happen in the Magento system when attempting to create an order that will prevent it from 
                        being placed, whether it's some type of unusual customer behavior or general server error. This type of failure 
                        is unrelated to Amazon's processing, and in this case, Amazon will process the authorization as usual. However, the 
                        authorization will be automatically canceled in Seller Central after 7 days of inactivity. This shouldn't be of
                        major concern if there is no further action taken on the transaction. The customer should be able to try the order 
                        again, either with Amazon Pay or another payment method. If you see a transaction in Seller Central that lists
                         <em>(Not Provided)</em> as the Seller Order ID, this is a good indication the customer was unable to successfully 
                         place the order in Magento (see below).
                      </p>
                      <img alt="_images/order-not-created.png" src="_images/order-not-created.png" />
                      <p>If you notice this happening somewhat often in your store, it may help to use a combination of Charge on Shipment 
                        for Payment Action and Automatic Authorization Mode. See the <a class="reference internal" href="configuration.html">
                        <span class="doc">Configuration</span></a> section for more details on payment options. You may also want to ensure 
                        that any other third-party plugins/extensions you may have installed are not prohibiting Amazon Pay as a payment 
                        method, or otherwise modifying quote data during the order placement process.</p>
                  </div>
                  <div class="section" id="orders-canceled-in-magento">
                    <h2>Why do we consistently see some canceled Magento orders paid with Amazon Pay?<a class="headerlink"
                      href="#orders-canceled-in-magento" title="Permalink to this headline">¶</a></h2>
                      <div class="admonition caution">
                        <p class="first admonition-title">Info</p>
                        <p class="last">This only applies to versions of the module &geq; 5.17.0.</p>
                      </div>
                      <p>As of version 5.17.0, the Amazon Pay module has reversed the order of transaction processing in the Amazon Pay system
                        and the order submission in Magento. Previously, the transaction was processed through Amazon (authorization/capture initiated)
                        before placing the Magento order, but in the case there was a network failure or general problem preventing the order from
                        being placed successfully, this could lead to “dangling” transactions in Seller Central with no associated Magento orders. These
                        were difficult or impossible for the module to cancel or otherwise flag, leading to merchant confusion. Now, the module places
                        the Magento order first, and can easily cancel the order if something goes wrong with the Amazon transaction. This logic reversal
                        may lead to an increase in benign canceled orders in Magento, but should drastically reduce the frequency of orphaned transactions
                        in Seller Central.
                      </p>
                  </div>
                  <div class="section" id="transaction-ids-changed">
                    <h2>Amazon Pay transaction IDs used to contain an 'A'; why do they now show a 'C'?<a class="headerlink" 
                      href="#transaction-ids-changed" title="Permalink to this headline">¶</a></h2>
                      <p>The legacy version of the Amazon Pay module used a different version of the Amazon Pay API (CV1). This version of the 
                        API expected authorization IDs for certain requests; these are the transaction IDs whose last section is prefixed with 'A'. 
                        The newer version of the API (CV2) is built on different concepts, and many requests will accept a charge ID, which has a 'C' 
                        in the displayed transaction ID in Magento. This ID can be used for both authorization and capture in CV2 of the API.</p>
                      <p>To better understand the differences between these formats, and how they are used in the 2 versions of the API, refer to 
                        the documentation on <a href="https://developer.amazon.com/docs/amazon-pay-checkout/upgrading-to-v2-checkout.html#managing-checkout-v1-orders-using-checkout-v2-apis"
                        target="blank">migrating from CV1 to CV2.</a> If your store uses an ERP, or other 3rd party order processing software that depends on 
                        the CV1 transaction IDs, you can apply the translation steps in reverse to obtain the needed authorization ID (for each 
                        transaction, replace the 'C' with an 'A'). 
                      </p>
                  </div>
                  <div class="section" id="cookies">
                    <h2>Does the Amazon Pay module create any cookies?<a class="headerlink"
                      href="#cookies" title="Permalink to this headline">¶</a></h2>
                      <p>The module does create two entries in the browser's local storage during the standard Amazon Pay Express Checkout flow: <em>amzn-checkout-session-config</em> 
                        <em>and amzn-checkout-session</em>. The <em>amazon-checkout-session-config</em> cookie holds values needed to render the Pay and Sign In buttons, like merchant ID, 
                        public key ID, and button signatures, along with preferences like button color and language. Once a customer authenticates with Amazon, they are returned to the 
                        merchant site with a checkoutSessionId as a URL parameter, which is stored in the <em>amazon-checkout-session</em> cookie for subsequent calls to Amazon for address 
                        information, and to update the checkout session in Amazon with accurate charge details as the checkout progresses.
                      </p>
                  </div>
                <!-- <div class="section" id="i-am-using-a-custom-theme-what-do-i-have-to-do">
<h2>I am using a custom theme, what do I have to do?<a class="headerlink" href="#i-am-using-a-custom-theme-what-do-i-have-to-do" title="Permalink to this headline">¶</a></h2>
<p>The styles used in the extension are based on Magento&#8217;s Luma theme. Responsive breakpoints and other variables, like <a class="reference external" href="https://github.com/amzn/amazon-payments-magento-2-plugin/blob/1.2.4/src/Payment/view/frontend/web/css/source/_module.less#L71">&#64;screen__m</a>, in the LESS files are defined by the Luma theme.
If your custom theme is based on the Magento theme Luma or Blank, you should be fine. If it isn&#8217;t, you should define all the variables and <cite>Responsive Breakpoints</cite> used.</p>
<p>Magento provides detailed information about <cite>Responsive Breakpoints</cite> and responsive design in general. See <a class="reference external" href="https://github.com/magento/magento2/blob/2.3/lib/web/css/docs/responsive.html">responsive.html in the magento2 repository</a> (vendor/magento/magento2-base/lib/web/css/docs/responsive.html in your Magento 2 installation) for more detailed explanations.</p>
<p><a class="reference external" href="http://devdocs.magento.com/guides/v2.3/frontend-dev-guide/responsive-web-design/rwd_overview.html">Magento DevDocs</a> gives additional information around this topic as well.</p>
<p>Amazon Pay provides two LESS files in this extension. They need to be adapted to match your theme&#8217;s responsive breakpoints.</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/amzn/amazon-payments-magento-2-plugin/blob/master/src/Login/view/frontend/web/css/source/_module.less">https://github.com/amzn/amazon-payments-magento-2-plugin/blob/master/src/Login/view/frontend/web/css/source/_module.less</a></li>
<li><a class="reference external" href="https://github.com/amzn/amazon-payments-magento-2-plugin/blob/master/src/Payment/view/frontend/web/css/source/_module.less">https://github.com/amzn/amazon-payments-magento-2-plugin/blob/master/src/Payment/view/frontend/web/css/source/_module.less</a></li>
</ul>
</div>
<div class="section" id="amazon-pay-widgets-are-not-surfaced">
<h2>Amazon Pay Widgets are not surfaced<a class="headerlink" href="#amazon-pay-widgets-are-not-surfaced" title="Permalink to this headline">¶</a></h2>
<p>Please check if you are using a theme, which is not based on Magento&#8217;s Luma or Blank theme first and follow the advice above.</p>
<p>If the widgets are still not surfaced correctly, please double check if the required div containers are available in the DOM tree of the website. For this, please go to the checkout and search for the container &#8220;amazon-widget-container&#8221; as shown below.</p>
<img alt="_images/amazon-widget-container.png" src="_images/amazon-widget-container.png" />
<p>In the example above, the container exists and also contains the div container for the address book widget (&#8220;addressBookWidgetDiv&#8221;), so the extension is installed properly and working correctly.</p>
<p>If that&#8217;s the case, but the widget is not visible, it is most likely because the required CSS style has not been included correctly. Like shown in the screenshot below, the height of the inspected container can be set manually via the browser debug console. If the widget will show up when doing this, the CSS definitions have not been included correctly. For more information on CSS styles and LESS files, please refer to the <a class="reference external" href="https://devdocs.magento.com/guides/v2.3/frontend-dev-guide/css-topics/css-overview.html">Cascading style sheets (CSS) documentation</a> of Magento 2.</p>
<img alt="_images/amazon-widget-container-2.png" src="_images/amazon-widget-container-2.png" />
</div> -->
              </div>
            </div>
          </div>
          <footer>
            <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
              <a href="m1_m2_migration.html" class="btn btn-neutral float-right"
                title="Migration: Magento 1 to Magento 2" accesskey="n">Next <span
                  class="fa fa-arrow-circle-right"></span></a>
              <a href="troubleshooting.html" class="btn btn-neutral" title="Troubleshooting" accesskey="p"><span
                  class="fa fa-arrow-circle-left"></span> Previous</a>
            </div>
            <hr />
            <div role="contentinfo">
              <p>
                &copy; Copyright 2021, Amazon.com Inc or its affiliates.
              </p>
            </div>
          </footer>
        </div>
      </div>
    </section>
  </div>
  <script type="text/javascript" src="_static/jquery.js"></script>
  <script type="text/javascript" src="_static/underscore.js"></script>
  <script type="text/javascript" src="_static/js/theme.js"></script>
</body>

</html>